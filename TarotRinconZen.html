<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tirada de Tarot (Pasado/Presente/Futuro) - Rincón Zen</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <script>
      // Configuración de Tailwind (opcional, para personalización)
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Lato', 'sans-serif'],
              'serif': ['Playfair Display', 'serif'],
            },
            colors: {
              'zen-deep-teal': '#004d4d',
              'zen-dark-slate': '#2F4F4F',
              'zen-gold': '#DAA520',
              'zen-pale-gold': '#EEE8AA',
              'zen-off-white': '#F8F8F8',
              'zen-text-dark': '#333333',
              'zen-text-light': '#F8F8F8',
            }
          }
        }
      }
    </script>

    <style>
        /* Estilos para las cartas y etiquetas */
        .tarot-card { aspect-ratio: 2.75 / 4.75; transition: transform 0.5s ease, box-shadow 0.3s ease; transform-style: preserve-3d; position: relative; }
        .tarot-card img { object-fit: cover; width: 100%; height: 100%; display: block; border-radius: 0.375rem; /* Bordes redondeados para la imagen */}
        .card-back { background: linear-gradient(135deg, #004d4d, #2F4F4F); border: 2px solid #EEE8AA; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: #EEE8AA; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: 0.5rem; backface-visibility: hidden; z-index: 2; }
        .card-content { position: relative; z-index: 1; height: 100%; display: flex; flex-direction: column; background-color: white; /* Fondo blanco por si la imagen no carga */}
        .position-label { position: absolute; top: 0; left: 0; right: 0; background-color: rgba(0, 77, 77, 0.7); color: #EEE8AA; font-size: 0.7rem; font-weight: bold; padding: 2px 0; text-align: center; z-index: 3; border-top-left-radius: 0.375rem; border-top-right-radius: 0.375rem; }
        .tarot-card .card-content { visibility: hidden; }
        .tarot-card.revealed .card-back { display: none; }
        .tarot-card.revealed .card-content { visibility: visible; }
        .category-label { font-size: 0.65rem; font-style: italic; color: #555; margin-top: 2px; }
        /* Estilo para la pregunta final en la interpretación */
        .future-question {
            display: block; /* Asegura que esté en nueva línea si es necesario */
            margin-top: 0.75rem; /* 12px */
            font-style: italic;
            color: #004d4d; /* Color zen-deep-teal */
            font-weight: 600; /* semibold */
        }
    </style>
</head>
<body class="bg-zen-off-white font-sans text-zen-text-dark antialiased p-5 md:p-10">

    <div class="container mx-auto max-w-4xl text-center bg-white p-6 md:p-10 rounded-lg shadow-lg">

        <h1 class="font-serif text-3xl md:text-4xl font-bold text-zen-deep-teal mb-6">Tu Tirada de Tarot (Pasado-Presente-Posible Futuro)</h1>
        <p class="text-zen-dark-slate mb-8">Consultá a los Arcanos Mayores. Concentrate en tu situación y presioná el botón para recibir guía sobre la situación de tu consulta (Pasado), dónde estás ahora (Presente) y hacia dónde podría dirigirse (Futuro Posible).</p>

        <button id="drawButton" class="bg-zen-gold hover:brightness-110 text-zen-deep-teal font-bold py-3 px-8 rounded-full text-lg transition duration-300 shadow-md mb-10">
            Realizar Tirada
        </button>

        <div id="cardDisplayArea" class="flex flex-col md:flex-row justify-center items-center md:items-start gap-6 md:gap-10 min-h-[400px] md:min-h-[500px]">
            <div class="text-gray-400 italic">Presioná el botón para ver tu tirada...</div>
        </div>

         <div id="interpretationArea" class="mt-10 text-left border-t border-zen-pale-gold pt-6 space-y-4">
             </div>

         <div id="conclusionArea" class="mt-8 text-left">
              </div>

    </div>

    <script>
        // --- Definición de los Arcanos Mayores ---
        // IMPORTANTE: Las rutas 'image' ahora apuntan a archivos locales en la carpeta 'images'
        const cartasMayores = [
             { id: 0, name: "El Loco", categoria: "Inicio / Impulso", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Loco.png" // Ruta actualizada
             },
            { id: 1, name: "El Mago", categoria: "Inicio / Impulso", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Mago.png" // Ruta actualizada
             },
            { id: 2, name: "La Sacerdotisa", categoria: "Introspección", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Sacerdotisa.png" // Ruta actualizada
             },
            { id: 3, name: "La Emperatriz", categoria: "Creatividad / Nutrición", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Emperatriz.png" // Ruta actualizada
             },
            { id: 4, name: "El Emperador", categoria: "Tradición / Guía", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Emperador.png" // Ruta actualizada
             },
            { id: 5, name: "El Sumo Sacerdote", categoria: "Tradición / Guía", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/SumoSacerdote.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 6, name: "Los Enamorados", categoria: "Conflicto / Sombra", isChallenge: true,
                interpretation: { /* ... */ },
                image: "images/Enamorados.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 7, name: "El Carro", categoria: "Inicio / Impulso", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Carro.png" // Ruta actualizada
             },
             { id: 8, name: "La Justicia", categoria: "Equilibrio", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Justicia.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 9, name: "El Ermitaño", categoria: "Introspección", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Ermitano.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 10, name: "La Rueda de la Fortuna", categoria: "Transforma", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/RuedaDeLaFortuna.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
             { id: 11, name: "La Fuerza", categoria: "Equilibrio", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Fuerza.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 12, name: "El Colgado", categoria: "Introspección", isChallenge: true,
                interpretation: { /* ... */ },
                image: "images/Colgado.png" // ¡Ojo! Tu captura decía 'colgado.png' (minúscula). Ajusta si es necesario. Usaré 'Colgado.png' por consistencia.
             },
            { id: 13, name: "La Muerte", categoria: "Transformación", isChallenge: true,
                interpretation: { /* ... */ },
                image: "images/Muerte.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 14, name: "La Templanza", categoria: "Equilibrio", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Templanza.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 15, name: "El Diablo", categoria: "Conflicto / Sombra", isChallenge: true,
                interpretation: { /* ... */ },
                image: "images/Diablo.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 16, name: "La Torre", categoria: "Transformación", isChallenge: true,
                interpretation: { /* ... */ },
                image: "images/Torre.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 17, name: "La Estrella", categoria: "Plenitud / Realización", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Estrella.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 18, name: "La Luna", categoria: "Conflicto / Sombra", isChallenge: true,
                interpretation: { /* ... */ },
                image: "images/Luna.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 19, name: "El Sol", categoria: "Plenitud / Realización", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Sol.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 20, name: "El Juicio", categoria: "Transformación", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Juicio.png" // Ruta actualizada (Asumiendo nombre de archivo)
             },
            { id: 21, name: "El Mundo", categoria: "Plenitud / Realización", isChallenge: false,
                interpretation: { /* ... */ },
                image: "images/Mundo.png" // Ruta actualizada (Asumiendo nombre de archivo)
             }
        ];

        // --- Elementos del DOM ---
        const drawButton = document.getElementById('drawButton');
        const cardDisplayArea = document.getElementById('cardDisplayArea');
        const interpretationArea = document.getElementById('interpretationArea');
        const conclusionArea = document.getElementById('conclusionArea');

        // --- Funciones ---

        /** Baraja un array (Fisher-Yates) */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /** Realiza la tirada y muestra resultados, incluyendo conclusión dinámica */
        function realizarTirada() {
            const mazoBarajado = [...cartasMayores];
            shuffleArray(mazoBarajado);
            const tirada = mazoBarajado.slice(0, 3); // Array con los 3 objetos carta

            cardDisplayArea.innerHTML = '';
            interpretationArea.innerHTML = '';
            conclusionArea.innerHTML = '';

            // Muestra cartas e interpretaciones individuales
            tirada.forEach((carta, index) => {
                let positionLabel = '';
                let interpretationKey = '';

                if (index === 0) { positionLabel = 'Pasado'; interpretationKey = 'past'; }
                else if (index === 1) { positionLabel = 'Presente'; interpretationKey = 'present'; }
                else { positionLabel = 'Futuro Posible'; interpretationKey = 'future'; }

                // --- Crear Elemento Carta ---
                const cardElement = document.createElement('div');
                // Clases de Tailwind para estilos y responsividad
                cardElement.className = 'tarot-card w-40 md:w-48 lg:w-56 bg-white rounded-lg shadow-lg overflow-hidden border border-zen-pale-gold';
                const cardBack = document.createElement('div');
                cardBack.className = 'card-back w-full h-full'; // Reverso de la carta
                const cardContent = document.createElement('div');
                cardContent.className = 'card-content h-full flex flex-col'; // Contenedor del frente
                const labelElement = document.createElement('div');
                labelElement.textContent = positionLabel;
                labelElement.className = 'position-label'; // Etiqueta Pasado/Presente/Futuro
                const img = document.createElement('img');
                img.src = carta.image; // ¡Usa la ruta actualizada!
                img.alt = carta.name;
                img.className = 'w-full flex-grow object-cover'; // Imagen de la carta
                img.onerror = function() { // Manejo de error si la imagen no carga
                    this.onerror=null; // Evita bucles infinitos
                    this.src='https://placehold.co/200x350/cccccc/ffffff?text=Error'; // Imagen de fallback
                    console.error(`Error al cargar la imagen: ${carta.image}`);
                };
                const nameContainer = document.createElement('div');
                nameContainer.className = 'p-1 text-center flex-shrink-0 bg-white rounded-b-lg'; // Contenedor para nombre/categoría
                const name = document.createElement('h3');
                name.textContent = carta.name;
                name.className = 'text-xs md:text-sm font-semibold text-zen-deep-teal'; // Nombre de la carta
                const category = document.createElement('p');
                category.textContent = carta.categoria;
                category.className = 'category-label'; // Categoría
                nameContainer.appendChild(category);
                nameContainer.appendChild(name);
                cardContent.appendChild(labelElement);
                cardContent.appendChild(img);
                cardContent.appendChild(nameContainer);
                cardElement.appendChild(cardBack);
                cardElement.appendChild(cardContent);
                cardDisplayArea.appendChild(cardElement); // Añade la carta al área de visualización

                // --- Crear Interpretación Individual (Selección Dinámica) ---
                const interpretationElement = document.createElement('div');
                interpretationElement.className = 'mb-4 p-4 bg-zen-off-white rounded shadow-sm';
                // Obtiene la interpretación correcta (past, present, future)
                const interpretationText = carta.interpretation[interpretationKey] || "Interpretación no disponible.";
                // Usamos innerHTML para renderizar el span de la pregunta si existe
                interpretationElement.innerHTML = `
                    <h4 class="font-serif text-xl font-bold text-zen-deep-teal mb-1">${positionLabel}: ${carta.name}</h4>
                    <p class="text-xs italic text-gray-500 mb-2">Categoría: ${carta.categoria}</p>
                    <p class="text-zen-dark-slate leading-relaxed">${interpretationText}</p>
                `;
                interpretationArea.appendChild(interpretationElement); // Añade la interpretación al área correspondiente

                // --- Revelar Carta (Animación simple) ---
                 setTimeout(() => {
                    cardElement.classList.add('revealed'); // Añade clase para mostrar el frente
                 }, (index + 1) * 300); // Retraso escalonado para cada carta
            });

            // --- Generación Dinámica de la Conclusión Final ---
            generarConclusion(tirada); // Llama a la función que crea el texto final

        }

        /** Genera el HTML para la conclusión final basada en las 3 cartas */
        function generarConclusion(tirada) {
             const cartaPasado = tirada[0];
            const cartaPresente = tirada[1];
            const cartaFuturo = tirada[2];
            conclusionArea.innerHTML = ''; // Limpia el área antes de añadir nuevo contenido

            // Construcción del HTML de la conclusión
            let conclusionHTML = `
                <div class="mt-8 p-6 bg-gradient-to-br from-zen-off-white to-white rounded-lg shadow border border-zen-pale-gold">
                    <h4 class="font-serif text-xl font-bold text-zen-deep-teal mb-4 text-center">Reflexión Final</h4>
                    <p class="text-zen-dark-slate leading-relaxed text-center mb-4">Observá la narrativa energética completa:</p>
                    <ul class="list-disc list-inside space-y-2 text-left max-w-md mx-auto text-zen-dark-slate mb-5">
                        <li>Venís de una energía de <strong>${cartaPasado.categoria}</strong> (representada por <span class="font-semibold">${cartaPasado.name}</span>).</li>
                        <li>Estás transitando una energía de <strong>${cartaPresente.categoria}</strong> (representada por <span class="font-semibold">${cartaPresente.name}</span>).</li>
                        <li>Y te dirigís hacia un potencial de <strong>${cartaFuturo.categoria}</strong> (representada por <span class="font-semibold">${cartaFuturo.name}</span>).</li>
                    </ul>
                     <p class="text-zen-dark-slate leading-relaxed text-center mb-4">¿Cómo se conectan estas fases energéticas en tu historia? ¿Hay una progresión, un contraste, una repetición?</p>
                    <p class="text-zen-dark-slate leading-relaxed text-center mt-4 mb-4">
                        Ahora, centrémonos en esa carta del <strong>Futuro Posible: ${cartaFuturo.name}</strong> y su energía de <strong>${cartaFuturo.categoria}</strong>. Recordá siempre que el Tarot ilumina tendencias y potenciales. El verdadero poder reside en tus manos, en las decisiones y acciones que vos tomés ahora.
                    </p>
                    <h5 class="font-semibold text-center text-zen-deep-teal mb-3">Considerá la energía de ${cartaFuturo.name} (${cartaFuturo.categoria}):</h5>
            `;

            // Añade texto específico si la carta futura es considerada un desafío o no
            if (cartaFuturo.isChallenge) {
                conclusionHTML += `
                    <div class="bg-red-50 border border-red-200 p-4 rounded-md text-sm">
                        <p class="text-red-800 leading-relaxed">
                            Esta combinación te muestra una energía que requiere tu atención consciente hacia adelante. No la veas como una sentencia, sino como una valiosa <strong>señal</strong> y una <strong>oportunidad para prepararte</strong>. Te da la ventaja de la anticipación. Preguntate:
                        </p>
                        <ul class="list-disc list-inside space-y-1 mt-2 text-red-700">
                            <li>¿Qué lección o advertencia me trae esta energía potencial de '${cartaFuturo.categoria}'?</li>
                            <li>¿Qué acciones o cambios de perspectiva en mi presente (guiado por ${cartaPresente.name} y su energía de '${cartaPresente.categoria}') puedo implementar para navegar esta energía futura de forma constructiva o incluso transformarla?</li>
                            <li>¿Qué fortalezas o aprendizajes del pasado (${cartaPasado.name}, energía de '${cartaPasado.categoria}') puedo utilizar como recurso ahora?</li>
                            <li>¿Qué necesito soltar o desarrollar en mí para afrontar este potencial con mayor sabiduría y resiliencia?</li>
                        </ul>
                    </div>
                `;
            } else {
                conclusionHTML += `
                    <div class="bg-green-50 border border-green-200 p-4 rounded-md text-sm">
                        <p class="text-green-800 leading-relaxed">
                            Esta combinación ilumina un camino lleno de <strong>potencial favorable</strong> que podés activamente cultivar y atraer hacia vos. Es una invitación a co-crear ese futuro auspicioso. Para nutrir esta energía y ayudarla a manifestarse, reflexioná:
                        </p>
                        <ul class="list-disc list-inside space-y-1 mt-2 text-green-700">
                            <li>¿Cómo puedo alinear mis acciones y mi enfoque actual (influenciado por ${cartaPresente.name} y su energía de '${cartaPresente.categoria}') con la vibración positiva de ${cartaFuturo.name} ('${cartaFuturo.categoria}')?</li>
                            <li>¿Qué pasos concretos, por pequeños que sean, puedo dar *hoy* para moverme en esa dirección?</li>
                            <li>¿Cómo puedo usar las bases o lecciones de mi pasado (${cartaPasado.name}, energía de '${cartaPasado.categoria}') para construir sobre seguro hacia este futuro?</li>
                            <li>¿Qué necesito creer o permitir en mi vida para recibir plenamente esta bendición potencial?</li>
                        </ul>
                    </div>
                `;
            }

            // Cierre del HTML de la conclusión
            conclusionHTML += `
                    <p class="text-center text-zen-dark-slate mt-6 font-semibold">
                        Vos sos el Mago de tu vida. Usá la sabiduría de esta lectura como punto de partida para la acción consciente. Confiá en tu intuición.
                    </p>
                </div>
            `;
            conclusionArea.innerHTML = conclusionHTML; // Inserta el HTML generado en el área de conclusión
        }

        // --- Event Listener ---
        // Asigna la función realizarTirada al evento 'click' del botón
        drawButton.addEventListener('click', realizarTirada);

        // Opcional: Limpiar al cargar la página para que no queden restos de una tirada anterior si se recarga
        window.onload = () => {
             cardDisplayArea.innerHTML = '<div class="text-gray-400 italic">Presioná el botón para ver tu tirada...</div>';
             interpretationArea.innerHTML = '';
             conclusionArea.innerHTML = '';
        }

    </script>

</body>
</html>
